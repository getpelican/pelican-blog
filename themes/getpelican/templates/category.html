{% extends "base.html" %}
{% block title %}
  {{ SITENAME }} - {{ category }}
{% endblock title %}
{% block content %}
  <div class="max-w-4xl mx-auto mt-16">
    <h1 class="text_gradient text-4xl sm:text-6xl font-black leading-normal sm:leading-snug">
      Articles in {{ category }} category
    </h1>
  </div>
  {% if articles %}
    {% for article in articles_page.object_list %}
      {# First item #}
      {% if loop.first and not articles_page.has_previous() %}
        {% include "./includes/featured_article.html" %}
        {% if loop.length > 1 %}
          <div class="max-w-4xl mx-auto mt-16">
            <section class="text-gray-900">
              <h2 class="text_gradient text-3xl font-black">Other articles</h2>
              <ol>
              {% endif %}
              {# other items #}
            {% else %}
              <div class="max-w-4xl mx-auto mt-16">
                {% if loop.first and articles_page.has_previous %}
                  <section>
                    <ol start="{{ articles_paginator.per_page -1 }}">
                    {% endif %}
                    <li>
                      <article class="mt-12">
                        <header>
                          <h1 class="text-xl font-semibold">
                            <a href="{{ SITEURL }}/{{ article.url }}"
                               rel="bookmark"
                               title="Permalink to {{ article.title|striptags }}">{{ article.title }}</a>
                          </h1>
                        </header>
                        {% include 'article_infos.html' %}
                        <div class="prose prose-sm sm:prose-base prose-a:text-primary break-words">
                          {{ article.summary }}
                          <div>
                            <a class="readmore" href="{{ SITEURL }}/{{ article.url }}">read more</a>
                            {% include 'comments.html' %}
                          </div>
                        </div>
                      </article>
                    </li>
                  {% endif %}
                  {% if loop.last %}
                  </ol>
                  {% if loop.last and (articles_page.has_previous()
                    or not articles_page.has_previous() and loop.length > 1) %}
                    {% include 'pagination.html' %}
                  {% endif %}
                </section>
              {% endif %}
            {% endfor %}
          {% else %}
            <section>
              <h2>Pages</h2>
              {% for page in PAGES %}
                <li>
                  <a href="{{ SITEURL }}/{{ page.url }}">{{ page.title }}</a>
                </li>
              {% endfor %}
            </section>
          </div>
        {% endif %}
      </div>
    {% endblock content %}
